<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Arkiv: Betalapplikationer i emulatorn</title>
</head>

<body>

<h2>Betalapplikationer i emulatorn</h2>

<blockquote style="border-left: 2px dotted; padding-left: 5px;">
	I början av 2010, när vi fortfarande inte kunde köpa applikationer i svenska Android Market så gjorde jag denna guiden
	som beskriver hur man kan använda en Android Emulator för att komma åt amerikanska Market, och på så sätt köpa applikationer.
	<br /><br />
	Den blev väldigt populär på den svenska Android-scenen, fick massvis med besökare, mycket bra kritik och rekommenderades av
	bland andra Swedroid och <a href="http://feber.se/android/art/180091/betalmarknad_i_sverige/">Feber.se</a>.
	<br /><br />
	Guiden låg från början på addresen <b>http://blogg.tthe.se/index.php/other/paid-apps-i-emulator/</b> men försvann under
	sommaren 2011 när jag gjorde om domänen tthe.se. Detta är en arkiverad version av den som till stor del överensstämmer
	med originalet (dock har all CSS försvunnit).
	<br /><br />
	Värt att notera är att HTC inte längre publicerar avbildningar av HTC Dream på deras hemsida, men finns (än så länge)
	att ladda ner här: <a href="http://www.mediafire.com/?llx4dnpzlze">Mediafire</a>. Försvinner de där ifrån med,
	kontakta mig via <a href="http://www.tthe.se">min hemsida</a> så kan jag skicka dem till dig.
</blockquote>


<!--
<blockquote><p>Den 30:e september 2010 offentliggjorde Google att betalapplikationer kommer till Sverige. Detta gör att denna guiden i princip fyllt sin funktion. Guiden kommer dock att finnas kvar här på sidan tills vidare, ifall någon skulle få för sig att leka med emulatorn.</p>
<p>Detta gör också att jag inte kommer att fortsätta försöka få igång en felfri Froyo-emulator.</p>

<p>Tack till alla som använt sig av denna sidan, eran respons har alltid varit lika trevlig.</p></blockquote>
-->

<p><strong>Läs detta först:<br />
</strong>Det denna guiden gör är att sätta upp en virtuell Android-maskin och via den komma åt betalapps.<br />
Detta fungerar i de allra flesta fall, men jag kan inte garantera att ni får tag på de applikationer ni vill.</p>
<p>Den virtuella maskin som skapas kommer att köra Android 1.6, vilket innebär att betalapps som bara fungerar för 2.x inte kommer att synas, dessa får fixas på annat sätt. Anledningen till att man kör 1.6 är att man enkelt kan få tag på en system-image till denna. Hittar man en fungerande image från 2.1 kan man givetvis köra det med, men mina försök med olika avbildningar från Nexus One och andra 2.1-telefoner har inte fungerat.</p>
<p>Detta kan också medföra att man laddar ner en app som fungerar på 1.6, men inte på senare som 2.1 eller 2.2. Ett tips är att läsa kommentarerna, står det en massa &#8220;Doesn&#8217;t work on   2.1&#8243; eller &#8220;Won&#8217;t work on Nexus One :&#8217;(&#8221; så ska du inte ladda ner den.<br />

Om det däremot står &#8220;Works nice on my Nexus&#8221; (Nexus One kör ju som   bekant 2.1 eller 2.2) så är det fritt fram.</p>
<p>Men hursomhelst så kommer emulatorn att ge dig tillgång till majoriteten av alla betalapps.</p>
<p>Om något skulle krångla rekommenderar jag att starta om de program som används (emulatorn, ddms etc.), fungerar det inte kan ni läsa de kommentarer som skrivits nedan. Uppstår ändå några oklarheter kan man alltid skriva en ny kommentar så svarar jag (efter förmåga) så fort jag kan.</p>
<p>Värt att notera är också att applikationerna är bundna till ditt Google-konto, så om du byter telefon eller gör en fabriksåterställning så kommer betalappsen att kunna laddas ner igen, gratis, sålänge du använder samma konto.</p>
<p><strong>För att kunna följa guiden måste du ha <a href="http://web.archive.org/web/20100817233853/http://blogg.tthe.se/index.php/other/android-sdk/">Android SDK installerat.</a></strong></p>
<p>I guiden för installation av Android SDK så nämnde jag två vektyg som finns i SDKn: ADB och DDMS. Nu är det dags att kolla in en tredje, nämligen Emulatorn.</p>
<p><strong>Förberedelse: Google Checkout</strong></p>

<p>För att betala apps använder man VISA/Mastercard/m.m, dessa registreras på Google Checkout och det är enklast att göra detta innan.</p>
<p><strong>1.</strong> Surfa till <a href="https://checkout.google.com/" target="_blank">https://checkout.google.com/</a>, logga in, och följ instruktionerna för att lägga till ditt bankkort.</p>
<p><strong>Steg 1. Skapa en AVD (Android Virtual Device)</strong></p>
<p>Det finns två sätt att skapa en AVD, dels grafiskt via SDKns programvara, och dels via kommandoraden i Windows kommandotolk. Jag tänker gå igenom båda.<br />
Men första steget är att slutföra installationen av SDK som påbörjades i förra guiden.</p>
<p><strong>1. </strong>Öppna mappen med Android SDK och starta programmet SDK Setup.exe</p>

<p><strong>2.</strong> I rutan som dyker upp, markera &#8220;Accept All&#8221; och tryck på install. Tryck på Close när installationen är klar.<br />
<strong>2b.</strong> Om det kom upp ett felmeddelande, tyck Close/Cancel för att komma till huvudfönstret, där väljer du Settings och kryssar för &#8220;<em>Force https://&#8230; sources to be fetched using http://</em>&#8220;. Starta om programmet och gör punkt 2.</p>

<p>Gör följande för att skapa en AVD genom det grafiska gränssnittet:<br />
<strong>1.</strong> Starta SDK Setup.exe igen så att fönstret &#8220;Android SDK and AVD manager&#8221; öppnas.</p>
<p><strong>2.</strong> Tryck på &#8220;Virtual Devices&#8221; och sedan &#8220;New&#8221;. Ge den ett valfritt namn och vid &#8220;Target&#8221; väljer du &#8220;Android 1.6 &#8211; API Level 4&#8243;. Här kan man också ställa in vilken hårdvara som den ska emulera, men här kör vi på default-värden och trycker bara på &#8220;Create AVD&#8221;.</p>

<p><span style="text-decoration: underline;">Överkurs:</span><br />
Vill du hellre stila lite och skapa AVDn genom kommandotolken så startar du cmd.exe och skriver: (detta funkar bara om miljövariablerna du skapade i guide 1 fungerar, annars måste du skriva <em>cd &#8220;C:\din sdk mapp\tools&#8221;</em> för att hamna rätt)<br />
<em>android list target</em><br />
Du får du upp en lista med vilka tillgängliga AVD-varianter som finns, leta upp den som har namnet Android 1.6, tex:<br />
<em>id: X or &#8220;android-4&#8243;<br />
Name: Android 1.6<br />

Type: Platform<br />
API level: 4<br />
Revision: 1<br />
Skins: HVGA (default), QVGA, WVGA800, WVGA854<br />
</em>Notera vilket nummer som står efter id: (i exemplet står det X, för dig visas en siffra).</p>
<p>Skriv sedan:<br />
<em>android create avd -n ValfrittNamn -t X</em><br />
Där X är numret du fick fram ovan.</p>
<p>Vilken metod du än använt så har du nu skapat en virtuell Android-maskin.</p>

<p><strong>Steg 2.</strong> <strong>System.img</strong></p>
<p><strong>1.</strong> Den Androidenhet som skapats innehåller inte riktigt allt vi behöver, därför surfar vi till <a href="http://developer.htc.com/adp.html#s3">http://developer.htc.com/adp.html#s3</a>(NOTE! Ny länk: <a href="http://www.mediafire.com/?llx4dnpzlze">Mediafire</a>). Överst i tabellen finns några olika systemfiler för Android 1.6 för nedladdning, välj den .zip-filen som står bredvid &#8220;System Image&#8221; (den heter typ signed-dream_devphone_userdebug-img-14721.zip).</p>
<p><strong>2.</strong> Packa upp .zip filen.<br />

Det ligger en fil i den uppackade mappen som heter &#8220;system.img&#8221;, det är den vi ska använda.</p>
<p><strong>3.</strong> Leta upp mappen där AVDn är sparad, default är detta C:\Users\DittAnvändarnamn\.android\avd\AVDNamnet.avd\<br />
Lägg den nedladdade system.img i denna mappen.</p>
<p><strong>Steg 3. Starta emulatorn</strong></p>
<p><strong>1.</strong> Nu är vi redo att köra! Starta &#8220;Setup SDK.exe&#8221; igen och välj Virtual Devices-&gt;AVDNamn-&gt;Start&#8230;<br />

<em>Alternativt:</em> Starta cmd.exe och skriv <em>emulator -avd AVDNamn</em></p>
<p>Nu kommer Android-emulatorn att startas och operativsystemet kickar igång efter en stund, då kommer du att frågas efter din Google-info, skriv in detta och allt ska fungera.<br />
(Du måste självklart ha internetuppkoppling för att det ska fungera).<br />
OBS! När den säger åt dig &#8220;Slide to open keyboard&#8221; så trycker du på Ctrl+F11 för att växla till landskapsvy.<br />
<span style="text-decoration: underline;"><strong>NOTE:</strong> Tiden det tar för emulatorn att starta första gången  varierar beroende på dator, det kan ta uppemot 15min.</span></p>

<p>När allt har startat så öppnar du Market och så vips så har du betalapps!</p>
<p><strong>Steg 4. Köpa Apps och få över dem till telefonen</strong></p>
<p>När du hittat en app du vill ha så trycker du på Buy, du skickas då till Google Checkout där du får välja ett kort (eller mata in kortinformation om du inte gjorde det under förberedelsen). Appen kommer att laddas ner och installeras på emulatorn precis som vanligt.</p>
<p><strong>OBS!</strong> Sedan Maj 2010 har Google fixat så att betal-apps du köper via emulator, utländskt SIM eller liknande sätt kommer att dyka upp för dig i din vanliga market på din vanliga telefon.<br />
Ex. Du köper &#8220;Beautiful Widgets&#8221; via emulatorn. Så fort du köpt den kan du ta fram din telefon och gå in på Market-&gt;Downloads så kommer &#8220;Beautiful Widgets&#8221; att finnas där för nedladdning, utan att man behöver föra över appen från emulatorn till telefonen.</p>

<p>Om appen <span style="text-decoration: underline;">inte</span> dyker upp i telefonen, gör så här:<br />
<strong>1. </strong>Medan emulatorn är igång så öppnad du Dalvik Debug Monitor genom att skriva <em>ddms</em> i kommandotolken.<br />
Eller starta den genom C:\SDK-mapp\tools\ddms.bat</p>
<p><strong>2.</strong> När programmet startas markerar du emulatorn i listan över devices, och väljer sedan Device -&gt; File Explorer</p>

<p><strong>3. </strong>Flytta dig till app-mappen, /data/app. Markera den appen du vill ha (namnet ger oftast tillräckligt med info för att lista ut vilken du ska ta) och tryck på diskett-ikonen för att spara till datorn.</p>
<p><strong>3b.</strong> En app har filändelsen .apk. Om det istället för en .apk-fil ligger en .zip-fil med ett i övrigt korrekt namn gör du såhär: Spara <span style="text-decoration: underline;">inte</span> .zip-filen till datorn. Istället förflyttar du dig till /data/app-private. Där ligger den .apk du vill ha, denna sparar du till datorn.</p>
<p><strong>4. </strong>Stäng emulatorn och koppla in telefonen i debugging-läge. Öppna kommandotolken och skriv <em>adb install C:\Sökväg\com.example.exampleapp.apk</em> för att installera appen till telefonen.</p>
<p><strong>4b.</strong> Om du inte får adb att fungera kan du lägga appen på minneskortet och sedan installera den genom valfri filhanterare, tex. ASTRO. Observera att man måste kryssa för Settings-&gt;Applications-&gt;Unknown Sources</p>

<p><em>Skriven av Tomas, 12/3 2010. Uppdaterad med nyheter och förklaringar 14/6 2010</em></p>
<p><em>Arkiverad version från 8/10 2010</em></p>

</body>
</html>